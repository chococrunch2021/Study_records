### Process vs Thread

### 프로세스 (Process)

- 프로그램: 저장장치에 저장되어 있는 코드. 명령어와 데이터의 묶음 (정적인 상태)
- 프로세스: 메모리에 올라와 `실행되고 있는 프로그램` (동적인 상태)
- `운영체제가 메모리로 프로그램을 가져와 PCB(프로세스 제어블록)을 할당해 줄 때 프로세스가 된다.`

- PCB 구성 요소

  - `PID`: 프로세스 구분자, 각 프로세스를 구분하는 ID
  - `메모리 관련 정보`: CPU가 실행하려는 프로세스가 메모리 어디에 저장되어있는가에 대한 정보
  - `중간값`: 프로세스가 사용했던 중간값 (어디까지 작업했는가)

- 시스템 자원

  - cpu 시간
  - 주소 공간
  - code, data, stack, heap 구조로 되어있는 독립된 메모리 영역

    <img width="350px" height="200px" src="./images/process.png">

- 프로세스는 `독립된 메모리 영역`(Code, data, stack, heap)을 할당받는다.
- 프로세스당 `최소 1개의 스레드(메인 스레드)`를 갖는다
- 각 프로세스는 `별도의 주소 공간에서 실행`되며 다른 프로세스의 변수, 자료구조에 접근할 수 없다.
- 다른 프로세스의 자원에 접근하려면 `프로세스 간 통신(IPC)`를 사용해야 한다.
  (ex. 파이프, 파일, 소켓 이용한 통신)

### 쓰레드(Thread)

- CPU가 실행하는 `프로세스의 작업 실행 단위`이다.
- 프로세스가 메모리에 올라와 CPU할당을 기다리는 준비상태가 되면 `CPU스케줄러가 CPU를 할당`해준다.
  이때, `CPU가 처리하는 작업의 단위`가 바로 스레드이다.
- 운영체제에 있어 작업의 단위는 프로세스이다.
- CPU에게 있어 작업의 단위는 쓰레드이다.

  <img width="350px" height="200px" src="./images/thread.png">

- 프로세스 내에서 각각 `stack만 따로 할당`받고 Code, data, heap 영역은 공유한다
- 프로세스의 주소 공간이나 자원(heap) 등을 같은 프로세스 내 스레드끼리 공유하며 실행된다
- 같은 프로세스 안의 스레드끼리는 같은 힙 공간을 공유하지만 프로세스는 다른 프로세스 메모리에 직접 접근할 수 없다
- 각 스레드는 별도의 레지스터와 스택을 갖고 있지만 `힙 메모리는 서로 읽고 쓸 수 있다`
- 한 스레드가 프로세스 자원을 변경하면 다른 이웃 스레드도 그 결과를 즉시 확인할 수 있다

- 프로세스는 서로 독립적이고 쓰레드는 서로 강하게 연결되어 있다
- 프로세스는 문서 편집을 하면서 프린터 스풀링을 하는 것과 같고 쓰레드는 문서 편집시에 맞춤법 검사, 문서 편집, 문서 입출력을 하는 관계이다
- 문서편집이 종료되더라도 프린터 스풀링에는 영향을 주지 않지만 문서편집이 종료되면 관련 작업들(맞춤법 검사, 문서 편집작업) 등은 종료 된다.

---

출처

- [https://gmlwjd9405.github.io/2017/10/01/basic-concepts-of-development-os.html](https://gmlwjd9405.github.io/2017/10/01/basic-concepts-of-development-os.html)

* 도서: 쉽게 배우는 운영체제
